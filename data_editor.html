<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Chrono Tape - Data Editor</title>
    <style>
        body { background: #111; color: #fff; font-family: 'Segoe UI', sans-serif; padding: 20px; display: flex; gap: 20px; }
        .container { display: flex; width: 100%; gap: 20px; }
        
        /* ì™¼ìª½ ì…ë ¥ íŒ¨ë„ */
        .input-panel { background: #222; padding: 20px; border-radius: 8px; border: 1px solid #444; width: 50%; }
        
        /* ì˜¤ë¥¸ìª½ ì¶œë ¥ íŒ¨ë„ */
        .output-panel { background: #222; padding: 20px; border-radius: 8px; border: 1px solid #444; width: 50%; display: flex; flex-direction: column; }
        
        h2 { color: #ffcc00; margin-top: 0; border-bottom: 1px solid #444; padding-bottom: 10px; }
        h3 { color: #4caf50; margin: 20px 0 10px 0; font-size: 16px; }

        label { display: block; margin-top: 10px; color: #aaa; font-size: 12px; }
        input, textarea, select { width: 100%; background: #333; border: 1px solid #555; color: #fff; padding: 8px; margin-top: 5px; box-sizing: border-box; }
        input:focus, textarea:focus { border-color: #ffcc00; outline: none; }
        
        .row { display: flex; gap: 10px; }
        .col { flex: 1; }

        button { background: #2980b9; color: white; border: none; padding: 12px; cursor: pointer; margin-top: 20px; font-weight: bold; width: 100%; border-radius: 4px; }
        button:hover { background: #3498db; }
        button.copy-btn { background: #27ae60; margin-top: auto; }
        
        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .tabs { margin-bottom: 20px; display: flex; gap: 10px; }
        .tab-btn { background: #333; border: 1px solid #555; padding: 10px 20px; cursor: pointer; color: #aaa; width: auto; margin-top: 0; }
        .tab-btn.active { background: #ffcc00; color: #000; border-color: #ffcc00; font-weight: bold; }

        pre { background: #000; padding: 15px; border: 1px solid #444; color: #0f0; white-space: pre-wrap; word-break: break-all; height: 400px; overflow-y: auto; font-family: 'Consolas', monospace; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

    <div style="position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1; pointer-events:none;"></div>

    <div class="container">
        <div class="input-panel">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('unit')">âš”ï¸ ìœ ë‹› ì—ë””í„°</button>
                <button class="tab-btn" onclick="switchTab('commander')">ğŸ‘‘ ì§€íœ˜ê´€ ì—ë””í„°</button>
            </div>

            <div id="form-unit">
                <div class="row">
                    <div class="col">
                        <label>ìœ ë‹› ID (ì˜ˆ: Unit-ê²€ì‚¬)</label>
                        <input type="text" id="u-id" placeholder="Unit-NewName">
                    </div>
                    <div class="col">
                        <label>í‘œì‹œ ì´ë¦„</label>
                        <input type="text" id="u-name" placeholder="ìƒˆë¡œìš´ ìœ ë‹›">
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label>ì†Œí™˜ ì½”ìŠ¤íŠ¸</label>
                        <input type="number" id="u-cost" value="3">
                    </div>
                    <div class="col">
                        <label>ì†Œí™˜ ë§ˆë¦¿ìˆ˜</label>
                        <input type="number" id="u-count" value="1">
                    </div>
                </div>

                <h3>ê¸°ë³¸ ìŠ¤íƒ¯</h3>
                <div class="row">
                    <div class="col"><label>ì²´ë ¥ (HP)</label><input type="number" id="u-hp" value="100"></div>
                    <div class="col"><label>ê³µê²©ë ¥ (DMG)</label><input type="number" id="u-dmg" value="10"></div>
                    <div class="col"><label>ë°©ì–´ë ¥ (DEF)</label><input type="number" id="u-def" value="0"></div>
                </div>
                <div class="row">
                    <div class="col"><label>ê³µê²© ì†ë„ (ì´ˆ)</label><input type="number" id="u-ats" value="1.0" step="0.1"></div>
                    <div class="col"><label>ì‚¬ê±°ë¦¬ (Range)</label><input type="number" id="u-range" value="50"></div>
                    <div class="col"><label>ì´ë™ ì†ë„ (Speed)</label><input type="number" id="u-speed" value="60"></div>
                </div>

                <h3>ìƒì„¸ ì„¤ì •</h3>
                <div class="row">
                    <div class="col"><label>íƒ€ì… (Melee / Range)</label>
                        <select id="u-type">
                            <option value="Melee">ê·¼ê±°ë¦¬ (Melee)</option>
                            <option value="Range">ì›ê±°ë¦¬ (Range)</option>
                        </select>
                    </div>
                    <div class="col"><label>íˆ¬ì‚¬ì²´ ì†ë„ (0=ì¦‰ë°œ)</label><input type="number" id="u-proj" value="0"></div>
                </div>
                
                <label>íŠ¹ì„± (ì½¤ë§ˆë¡œ êµ¬ë¶„, ì˜ˆ: tank, stun)</label>
                <input type="text" id="u-traits" placeholder="heavy, stun">

                <label>ì„¤ëª… (íˆ´íŒ í‘œì‹œìš©)</label>
                <textarea id="u-desc" rows="2" placeholder="ë‹¨ë‹¨í•œ ê°‘ì˜·ì„ ì…ê³  ì ì˜ ê³µê²©ì„ ë²„íŒë‹ˆë‹¤."></textarea>

                <button onclick="generateUnit()">ğŸ’¾ ìœ ë‹› ì½”ë“œ ìƒì„±</button>
            </div>

            <div id="form-commander" class="hidden">
                <div class="row">
                    <div class="col">
                        <label>ì§€íœ˜ê´€ ID (ì˜ë¬¸)</label>
                        <input type="text" id="c-id" placeholder="knight_king">
                    </div>
                    <div class="col">
                        <label>í‘œì‹œ ì´ë¦„</label>
                        <input type="text" id="c-name" placeholder="ê¸°ì‚¬ë‹¨ì¥">
                    </div>
                </div>
                
                <label>ì¹­í˜¸ (Title)</label>
                <input type="text" id="c-title" placeholder="ë¶ˆë©¸ì˜ ìˆ˜í˜¸ì">

                <div class="row">
                    <div class="col">
                        <label>ìŠ¤í‚¬ íƒ€ì…</label>
                        <select id="c-type">
                            <option value="PASSIVE_AURA">íŒ¨ì‹œë¸Œ ì˜¤ë¼ (Passive)</option>
                            <option value="ACTIVE_ATK">ì•¡í‹°ë¸Œ ê³µê²© (Active Attack)</option>
                            <option value="ACTIVE_BUFF">ì•¡í‹°ë¸Œ ë²„í”„ (Active Buff)</option>
                            <option value="SUMMON">ì†Œí™˜ (Summon)</option>
                        </select>
                    </div>
                    <div class="col">
                        <label>ì¿¨íƒ€ì„ (ì´ˆ)</label>
                        <input type="number" id="c-cooldown" value="30">
                    </div>
                </div>

                <label>ìŠ¤í‚¬ ì„¤ëª…</label>
                <textarea id="c-desc" rows="3" placeholder="30ì´ˆë§ˆë‹¤ ì „ì¥ì˜ ëª¨ë“  ì•„êµ°ì—ê²Œ ë³´í˜¸ë§‰ì„ ë¶€ì—¬í•©ë‹ˆë‹¤."></textarea>
                
                <label>ì´ë¯¸ì§€ ê²½ë¡œ (assetKey)</label>
                <input type="text" id="c-img" value="cmd_knight">

                <button onclick="generateCommander()">ğŸ’¾ ì§€íœ˜ê´€ ì½”ë“œ ìƒì„±</button>
            </div>
        </div>

        <div class="output-panel">
            <h2 id="output-title">ğŸ“¤ ìƒì„±ëœ ì½”ë“œ</h2>
            <p style="color:#888; font-size:12px;">ì•„ë˜ ì½”ë“œë¥¼ ë³µì‚¬í•´ì„œ <b>js/data.js</b> íŒŒì¼ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</p>
            <pre id="output-code">// ì½”ë“œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</pre>
            <button class="copy-btn" onclick="copyCode()">ğŸ“‹ í´ë¦½ë³´ë“œ ë³µì‚¬</button>
        </div>
    </div>

    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('form-unit').classList.add('hidden');
            document.getElementById('form-commander').classList.add('hidden');

            if (tab === 'unit') {
                document.querySelectorAll('.tab-btn')[0].classList.add('active');
                document.getElementById('form-unit').classList.remove('hidden');
                document.getElementById('output-title').innerText = "ğŸ“¤ ìƒì„±ëœ ìœ ë‹› ì½”ë“œ";
            } else {
                document.querySelectorAll('.tab-btn')[1].classList.add('active');
                document.getElementById('form-commander').classList.remove('hidden');
                document.getElementById('output-title').innerText = "ğŸ“¤ ìƒì„±ëœ ì§€íœ˜ê´€ ì½”ë“œ";
            }
        }

        function generateUnit() {
            const id = document.getElementById('u-id').value || 'Unit-' + Date.now();
            const name = document.getElementById('u-name').value;
            const cost = document.getElementById('u-cost').value;
            const count = document.getElementById('u-count').value;
            const hp = document.getElementById('u-hp').value;
            const dmg = document.getElementById('u-dmg').value;
            const def = document.getElementById('u-def').value;
            const ats = document.getElementById('u-ats').value;
            const range = document.getElementById('u-range').value;
            const speed = document.getElementById('u-speed').value;
            const type = document.getElementById('u-type').value;
            const proj = document.getElementById('u-proj').value;
            const desc = document.getElementById('u-desc').value;
            
            const traitsRaw = document.getElementById('u-traits').value;
            const traits = traitsRaw ? traitsRaw.split(',').map(t => `'${t.trim()}'`).join(', ') : '';

            const code = `
    "${id}": {
        name: "${name}",
        cost: ${cost},
        count: ${count},
        hp: ${hp},
        damage: ${dmg},
        defense: ${def},
        attackSpeed: ${ats},
        range: ${range},
        speed: ${speed},
        type: "${type}",
        projectileSpeed: ${proj},
        traits: [${traits}],
        width: 30,
        height: 30,
        desc: "${desc}"
    },`;

            document.getElementById('output-code').innerText = code;
        }

        function generateCommander() {
            const id = document.getElementById('c-id').value || 'cmd_' + Date.now();
            const name = document.getElementById('c-name').value;
            const title = document.getElementById('c-title').value;
            const type = document.getElementById('c-type').value;
            const cool = document.getElementById('c-cooldown').value;
            const desc = document.getElementById('c-desc').value;
            const img = document.getElementById('c-img').value;

            const code = `
    "${id}": {
        name: "${name}",
        title: "${title}",
        type: "${type}", // ë¡œì§ì€ BattleScene/CombatManagerì—ì„œ êµ¬í˜„ í•„ìš”
        cooldown: ${cool},
        desc: "${desc}",
        img: "${img}"
    },`;

            document.getElementById('output-code').innerText = code;
        }

        function copyCode() {
            const code = document.getElementById('output-code').innerText;
            navigator.clipboard.writeText(code).then(() => alert("ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"));
        }
    </script>
</body>
</html>