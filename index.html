<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:;">
    <title>CHRONO TAPE</title>
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <script src="js/easystar.min.js"></script>
</head>
<body>
    <div id="game-container"></div>

    <div id="artifact-container" class="artifact-container"></div>

    <div id="ui-top-bar" class="ui-overlay">
        <div class="info-group">
            <div id="cost-display">???: 10 / 50</div>
        </div>

        <div class="timeline-wrapper">
            <span data-i18n="ui.time">??</span>
            <input type="range" id="timeline-slider" min="0" max="1000" value="0">
            <span id="time-display">0.0s</span>
        </div>

        <div class="control-group">
            <button id="btn-reset" class="btn-warning" data-i18n="ui.reset">??</button>

            <div class="speed-controls" style="display:none;" id="speed-panel">
                <button id="btn-pause" class="speed-btn">Pause</button>
                <button id="btn-1x" class="speed-btn active">1x</button>
                <button id="btn-2x" class="speed-btn">2x</button>
                <button id="btn-3x" class="speed-btn">3x</button>
            </div>

            <button id="btn-turn-end" class="btn-primary" data-i18n="ui.go">??</button>
        </div>
    </div>

    <div id="ui-bottom-bar" class="ui-overlay">
        <div id="deck-pile" class="pile-container pile-left">
            <div class="card-back-visual"></div>
            <div class="pile-label" data-i18n="ui.deck">?</div>
            <div class="pile-number" id="deck-count">0</div>
        </div>

        <div id="hand-area"></div>

        <div id="discard-pile" class="pile-container pile-right">
            <div class="pile-icon-large">??</div>
            <div class="pile-label" data-i18n="ui.discard">??</div>
            <div class="pile-number" id="discard-count">0</div>
        </div>

        <div id="seal-pile" class="pile-badge-small" title="?? ?? ??" data-i18n-title="ui.sealedTitle">
            <span class="pile-icon-small">??</span>
            <span id="seal-count">0</span>
        </div>
    </div>

    <div id="card-viewer-modal" class="ui-overlay" style="display: none;">
        <div class="viewer-box">
            <div class="viewer-header">
                <h2 id="viewer-title" data-i18n="ui.cardList">?? ??</h2>
                <button id="btn-viewer-close">X</button>
            </div>
            <div id="viewer-content" class="viewer-grid"></div>
        </div>
    </div>

    <div id="game-popup" class="ui-overlay" style="display: none;">
        <div class="popup-box">
            <h2 id="popup-title" data-i18n="ui.popupTitle">??</h2>
            <div id="popup-message" data-i18n="ui.popupMessage">??? ??</div>
            <div class="popup-buttons">
                <button id="btn-popup-cancel" class="btn-warning" data-i18n="ui.cancel">??</button>
                <button id="btn-popup-confirm" class="btn-primary" data-i18n="ui.confirm">??</button>
            </div>
        </div>
    </div>

    <div id="artifact-editor" class="editor-panel" style="display: none;"></div>

    <button id="btn-toggle-editor" style="position:fixed; top:10px; right:10px; z-index:3000;" data-i18n="ui.mapEditor">? ???</button>

    <div id="unit-tooltip"></div>

    <script>
        document.getElementById('btn-toggle-editor').onclick = () => {
            const panel = document.getElementById('artifact-editor');
            panel.style.display = (panel.style.display === 'none') ? 'block' : 'none';
        };
    </script>

    <script src="js/scenes/LoadingScene.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/data.js"></script>
    <script src="js/data/SVGdata.js"></script>
    <script src="js/managers/SVGManager.js"></script>
    <script src="js/objects/Unit.js"></script>
    <script src="js/objects/Projectile.js"></script>
    <script src="js/managers/DataManager.js"></script>
    <script src="js/managers/GameLogic.js"></script>
    <script src="js/managers/EnemyAI.js"></script>
    <script src="js/managers/CardDeckManager.js"></script>
    <script src="js/managers/InteractionManager.js"></script>
    <script src="js/managers/CombatManager.js"></script>
    <script src="js/managers/UIManager.js"></script>
    <script src="js/managers/GhostSimulator.js"></script>
    <script src="js/managers/ArtifactManager.js"></script>
    <script src="js/maps/MapData.js"></script>
    <script src="js/scenes/TitleScene.js"></script>
    <script src="js/scenes/CommanderSelectScene.js"></script>
    <script src="js/scenes/MapScene.js"></script>
    <script src="js/scenes/BattleScene.js"></script>
    <script src="js/scenes/ShopScene.js"></script>
    <script src="js/data/EventData.js"></script>
    <script src="js/managers/EventManager.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
